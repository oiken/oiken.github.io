开始写工作日志，每天都写，每个月一个 markddown 文件，记录每天解决的问题和想法

# 2024-12-30  
## 想做的产品：
- [ ] 极简浏览器 + wasm插件，个人知识和历史保存，搜索和管理，摸鱼网站，把网站下载下来稍后看，
- [ ] 极简浏览器，安装 [Dillinger 网站](https://dillinger.io/)，[把网页保存成 markdown 格式保存下来](https://breakdance.github.io/breakdance/)
- [ ] 极简浏览器，用标签树的方式来浏览，跳跃，往回找
- [ ] 声音玩游戏
- [ ] 五体玩游戏
- [ ] 声控玩玩具
- [ ] 拿手机支架做自制小车（激光坦克），声控移动，
- [ ] 用光线+特制的能量转换接头给设备供电，实现牵连+供电+数据传输的功能，给无人潜艇+无人船使用
- [ ] 市场质量监督检验部门的质检报告，写成app，购买清单防患未然，使用时监控及时止损，购买后留存购买小票和拍摄产品外观，事后追赔，组团找有资质的实验室进行检测，出报告，组团请律师打官司
- [ ] 在电脑手机上实现操作，通过 MCP ，训练人工智能做某件事的步骤，熟练后逐步操作，
- [ ] 做 ai 教育 app ，寓教于乐，教小孩子英语，数学，中文。主要做法是重复中英文，从物品单词开始，动词使用，描述，认识很多的词；数学是20以内的加减法，乘法口诀
- [ ] 人工智能搭配电脑，手机，智能眼镜，蓝牙耳机，听命令可以做动作的游戏或实体玩具
- [ ] 购买域名 oiken.wang，创建一个自己的博客网站，
- [ ] 创建一个浏览器网站，browser lee，dumbrowser，dailybrowser，
  
## 拆解步骤：
- [x] 学习编写网站
- [x] 学习 C 语言，[教程](https://www.freecodecamp.org/chinese/news/the-c-beginners-handbook/)：
- [ ] 选择技术栈：c/c++，为了体积小，速度快，好找工作，安全方面用 AutoRSA c/c++ 和 sql 的质量保证
- [x] 找到了 700kb 的 android 浏览器项目代码：[Thunder-Browser](https://github.com/anthonycr/Thunder-Browser)
- [ ] 人工智能辅助，加速开发
- [ ] 选定基础项目，支持以后的项目
- [ ] 技术选型，兼容性，安全，速度兼备
- [ ] 英语单词，口语，语法，随身
- 带着小孩学咏春：
* - [x] 小念头
* - [ ] 寻桥
* - [ ] 标指
* - [ ] 木人桩
* - [ ] 八斩刀
* - [ ] 六点半棍
* - [ ] 短棍术
- [ ] 带着小孩学滑板，踩着滑板去地铁站
- [ ] 随身听说 walkman -> whatman AI 听你说，教你说
- [ ] AI 浏览器  [仿照这个网站](https://deta.surf/)

## 注意：不要有洁癖，不要有洁癖，不要有洁癖
## 目的：留下痕迹，方便别人浏览
## 强求：中英文写作

### 具体执行：
#### 2024-12-30
* *目的：* 快
  * 展示已经做的项目
  * 写博客，记录进程
* 写网页：HTML/PureCSS/TypeScript
* - [ ] [PureCSS](https://pure-css.github.io/) v1.0.1可用于 winxp 的 IE8+ ，雅虎团队维护，老牌，两周前还提交了代码。今晚学习
* - [ ] 先用 purecss 3.0版本采用 email 布局进行开发，能支持到 win7 的 IE10+，winxp的 IE8+ 需要让 AI 改写一个版本来适应
* 写文章：Markdown
* 托管：Github Pages，尽量自动化 
请你写一个HTML/CSS/Typescript 网页，实现


# 2025-01-03
## 想做：
- [ ] 开发极简（基建）浏览器，起名 browserlee.com 或 dumbrowser.com 或 gbrowser.com 或 ggbrowser.com ，GG 代表 good game，good going，
- [ ] 开发 app ，用 [gyroflow](https://github.com/gyroflow/gyroflow) + 上传到很多视频平台的功能 + 代理出去 + 保存到网盘 + 支持对接特定的摄像头比如低端没有防抖功能的摄像头

## 工作规则：
- [ ] 白天写 production： c/c++ + wasm3 做极简（基建）浏览器，html/css/js 做界面
- [ ] 晚上写 side project 如先做好：个人博客，日志，找到，习得，再做wasm功能，游戏
  



# 2024-01-07
## 想做的产品
- [ ] 无人猫，通知家鼠，用飞哥弹弓只杀鼠
- [ ] StableShare，去抖动后分享到所有视频网站和网盘
 
## 分解动作：
#### 看他们怎么实现的，再用在其他平台上
- [ ] 阅读 [Thunder Browser](https://github.com/anthonycr/Thunder-Browser) 的源代码
- [ ] 阅读 [Lighting Browser](https://github.com/anthonycr/Lightning-Browser) 的源代码

---

# 2024-01-08
## 复杂的事情简单做，简单的事情重复做，重复的事情用心做

## 用 HeadLine 方式做项目，每天出头条
今天：把网站弄好，去投简历，
明天：看浏览器源代码，学习浏览器的基本做法
再明天：在五个平台上写极简（基建）浏览器

# 2024-01-09
## 强化自己的方向：浏览器
* 作为基础建设，
* 普通用法：摸鱼，管理书签和历史，
* 特殊用法：针对自己的网站做优化，如 pdf翻译，语音玩游戏，体操玩游戏Flash，书籍搜索，BT种子，视频网站下载，
* 赚钱：搜索网站，网盘，vpn，自己的网站，pdf翻译（配合书籍搜索），
  
## 浏览器的技术结构
* 各大操作系统：Windows，MacOS，Linux，Android，iOS
* 想收到钱：捐赠，会员，购买
* 想及时展示给用户：网页上，和浏览器上，使用 WASM：工具，游戏，内容

---

# 2025-01-11
### 问题：失败编译 [webview-go 库](https://github.com/webview/webview_go?tab=readme-ov-file)：
```
go build
返回：github.com/webview/webview_go: build constraints exclude all Go files 下面是路径
```

#### 解决：go env 的设置以前被修改成了 linux，没有改过来
```shell
go env -help
返回：usage: go env [-json] [-changed] [-u] [-w] [var ...]
go env -changed
返回：
  	GOARCH='arm'
	GOOS='linux'
	GOPROXY='https://goproxy.cn,direct'
	CC='/usr/bin/clang'
	CXX='/usr/bin/clang++'
go -u GOARCH GOOS CC CXX
恢复这几个的原值，但 ‘CC CXX’ 没能恢复成功，原因是在 ~/.zshrc 里设置了 CC CXX，我用 vim ~/.zshrc 和 source ~/.zshrc 注释了这两个变量，再看就好了。
GOPROXY 是国内的源，有用，保留

go build -o bspider_debug
成功，bspider_debug 是 3mb
想要小体积： go build -ldflags="-s -w" -o bspider_release  
bspider_release 是 1.8mb
相比之下 C 实现的才 200 kb，C++ 的才 166kb
```

#### 拓展：安装 tinygo 试试，结果失败，放弃
```shell
brew tap tinygo-org/tools
brew install tinygo
tinygo build -o bspider_tinygo 编译报错：
../../../../go/pkg/mod/github.com/webview/webview_go@v0.0.0-20240831120633-6173450d4dd6/webview.go:17:10: fatal: 'webview.h' file not found
放弃，删除 tinygo
brew uninstall tinygo
brew untap tinygo-org/tools
```

### 构建 [webview](https://github.com/webview/webview) 的 C/C++ 示例：
```shell
cmake -G Ninja -B build -S . -D CMAKE_BUILD_TYPE=Release
cmake --build build
```

#### 拓展：用 zig 编译，看是不是还能更小的体积，结果是454kb，比 C 的 200kb，C++ 的 167kb 大很多，优化无果，放弃

### 兼容性：
```shell
查看兼容性，竟然最低是 15.0
otool -l build/examples/webview_example_basic_c.app/Contents/MacOS/webview_example_basic_c | grep -A 4 "platform"

 platform 1
    minos 15.0
      sdk 15.2
   ntools 1
     tool 3

otool -l build/examples/webview_example_basic_c.app/Contents/MacOS/webview_example_basic_c | grep -A 4 "LC_BUILD_VERSION"

      cmd LC_BUILD_VERSION
  cmdsize 32
 platform 1
    minos 15.0
      sdk 15.2
```
只能改改
```shell
export MACOSX_DEPLOYMENT_TARGET=11.0
export CC=/usr/bin/clang
export CXX=/usr/bin/clang++

rm -rf build
cmake -G Ninja -B build -S . -D CMAKE_BUILD_TYPE=Release
cmake --build build

otool -l build/examples/webview_example_basic_c.app/Contents/MacOS/webview_example_basic_c | grep -A 4 "LC_BUILD_VERSION"

      cmd LC_BUILD_VERSION
  cmdsize 32
 platform 1
    minos 11.0
      sdk 15.2

其中
platform 1 表示 macOS 平台
1 = macOS
2 = iOS
3 = tvOS
4 = watchOS
完成后 webview_example_basic_c.app 只有206kb，如果是兼容到13.0即 export MACOSX_DEPLOYMENT_TARGET=11.0，只有 202kb，兼容性非常好
```

如果是windows 系统，需要先[安装 webview2运行时约 155mb 以上](https://developer.microsoft.com/microsoft-edge/webview2/)
微软官方建议让客户下载：[常青引导程序🈷约 1.7mb](https://go.microsoft.com/fwlink/p/?LinkId=2124703)
```
系统要求：Windows 7 SP1 或更高版本
引导程序是一个小型安装程序，用于下载常青运行时匹配设备体系结构并将其安装在本地。还有一个链接允许您以编程方式下载引导程序。
```

# 2025-01-12
## 凌晨思考：
在网页上做爬虫，咨询 claude 3.5 code，告知浏览器有CORS限制，但可以通过 CORS代理，当然代理都有限制，继续探索，原来还有很多品种的代理：  
```
列举一些免费、无需注册，且对爬虫有帮助的代理类型：

免费CORS代理
FREE_CORS_PROXIES = {
	'cors-anywhere': 'https://cors-anywhere.herokuapp.com/',
	'allorigins': 'https://api.allorigins.win/raw?url=',
	'corsproxy': 'https://corsproxy.io/?',
	'proxy-anywhere': 'https://proxy-anywhere.herokuapp.com/'
}
免费图片代理
FREE_IMAGE_PROXIES = {
	'images.weserv.nl': 'https://images.weserv.nl/?url=',
	'imageproxy': 'https://imageproxy.org/image?url=',
	'wsrv.nl': 'https://wsrv.nl/?url='
}
公共HTTP代理池
FREE_PROXY_LISTS = {
	'proxylist': 'http://www.proxylist.download/api/v1/get',
	'pubproxy': 'http://pubproxy.com/api/proxy',
	'proxy-list': 'https://www.proxy-list.download/api/v1/get'
}
其他有用的免费代理服务
OTHER_FREE_PROXIES = {
	# 匿名WebAPI代理
	'hide.me': 'https://hide.me/en/proxy',
	
	# 临时代理服务器
	'croxyproxy': 'https://www.croxyproxy.com',
	
	# 开放代理列表
	'spys.one': 'https://spys.one/en/',
	
	# 匿名浏览代理
	'proxysite': 'https://www.proxysite.com'
}
```

## 延伸：
爬取网络都是频率，带宽，ip的限制，因此用自制的浏览器爬取时，轮番采取本地渲染获取，CORS代理，图片代理，免费HTTP代理池，匿名WebAPI代理，临时代理服务器，开放代理列表，匿名浏览代理。遵守它们的使用限制

## 今日工作：
- [x] 看完 CMake 简单介绍
- [ ] 在 webview C/C++ 实现的浏览器上，直接获取豆瓣的网页，完成 MVP 功能，再
- [ ] 考虑服务器分配任务和上传数据，
- [ ] 考虑本地爬取的频率，
- [ ] 借用众多代理的策略，
- [ ] 用网页实现界面的功能，
- [ ] 浏览器本地存储
  
### 开发细节：
```bash
mkdir CrawlFarm
cd CrawlFarm

创建文件：main.c 内容：
```main.c
#include "webview/webview.h"
#include <stddef.h>

#ifdef _WIN32
#include <windows.h>
#endif

#ifdef _WIN32
int WINAPI WinMain(HINSTANCE hInst, HINSTANCE hPrevInst, LPSTR lpCmdLine,
                   int nCmdShow) {
  (void)hInst;
  (void)hPrevInst;
  (void)lpCmdLine;
  (void)nCmdShow;
#else
int main(void) {
#endif
  webview_t w = webview_create(0, NULL);
  webview_set_title(w, "Basic Example");
  webview_set_size(w, 1366, 768, WEBVIEW_HINT_NONE);
  // 加载网页
  webview_navigate(w, "https://www.douban.com");
  webview_run(w);
  webview_destroy(w);
  return 0;
}

```

CMakeLists.txt 内容  
```CMakeLists.txt
set(COPYRIGHT "Copyright [2025], oiken.github.io")
set(VENDOR "oiken.github.io")
set(DESCRIPTION "Crawler farm targeting DouBan.com")
set(SHARED_SOURCES)

if(CMAKE_SYSTEM_NAME STREQUAL "Darwin")
    include(resources/macos/resources.cmake)
elseif(CMAKE_SYSTEM_NAME STREQUAL "Windows")
    include(resources/windows/resources.cmake)
endif()

project(CrawlFarm LANGUAGES C CXX)

set(CMAKE_RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/bin")
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/lib")
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/lib")

include(FetchContent)

FetchContent_Declare(
    webview
    GIT_REPOSITORY https://github.com/webview/webview
    GIT_TAG 0.12.0)
FetchContent_MakeAvailable(webview)

add_executable(CrawlFarm MACOSX_BUNDLE WIN32)
target_sources(CrawlFarm PRIVATE main.c ${SHARED_SOURCES})
target_link_libraries(CrawlFarm PRIVATE webview::core_static)
```

执行 cmake -G Ninja -B build -S . -D CMAKE_BUILD_TYPE=Release
cmake --build build
编译出来的 build/bin/CrawlFarm.app 才 106kb

### 运行成功，接着获取浏览器网页里面的元素

### 上传到服务器


# 2025-01-13
### 解决小问题：
* 暂时不要运行包，要命令行，可以看日志
* 添加清理命令，避免手动关闭和删除

```CMakeLists.txt
cmake_minimum_required(VERSION 3.15)

set(COPYRIGHT "Copyright [2025], oiken.github.io")
set(VENDOR "oiken.github.io")
set(DESCRIPTION "Crawler farm targeting DouBan.com")
set(SHARED_SOURCES)

if(CMAKE_SYSTEM_NAME STREQUAL "Darwin")
    include(resources/macos/resources.cmake)
elseif(CMAKE_SYSTEM_NAME STREQUAL "Windows")
    include(resources/windows/resources.cmake)
endif()

project(CrawlFarm LANGUAGES C CXX)

set(CMAKE_RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/bin")
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/lib")
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/lib")

include(FetchContent)

FetchContent_Declare(
    webview
    GIT_REPOSITORY https://github.com/webview/webview
    GIT_TAG 0.12.0)
FetchContent_MakeAvailable(webview)

# add_executable(CrawlFarm MACOSX_BUNDLE WIN32) 暂时不要运行包，要命令行，可以看日志
add_executable(CrawlFarm)
target_sources(CrawlFarm PRIVATE main.c ${SHARED_SOURCES})
target_link_libraries(CrawlFarm PRIVATE webview::core_static)

# 添加清理命令，避免手动关闭和删除
if(APPLE)
    add_custom_target(cleanup
        COMMAND killall CrawlFarm || true
        COMMAND rm -rf ${CMAKE_BINARY_DIR}/bin/CrawlFarm.app
        COMMAND rm -rf ${CMAKE_BINARY_DIR}/bin/CrawlFarm
        COMMENT "Cleaning up old CrawlFarm"
    )
elseif(WIN32)
    add_custom_target(cleanup
        COMMAND taskkill /F /IM CrawlFarm.exe || exit 0
        COMMAND del /F /Q ${CMAKE_BINARY_DIR}/bin/CrawlFarm.exe
        COMMENT "Cleaning up old CrawlFarm"
    )
endif()
# 让 CrawlFarm 目标依赖于 cleanup
add_dependencies(CrawlFarm cleanup)
```

```main.c
#include "webview.h"
#include <stdio.h>

#ifdef _WIN32
#define WEBVIEW_IMPLEMENTATION
#endif

int main(void)
{
	webview_t w = webview_create(1, NULL);
	webview_set_title(w, "豆瓣网");
	webview_set_size(w, 1366, 768, WEBVIEW_HINT_NONE);

	// 注入一段等待页面加载完成的 JavaScript 代码
	const char *js = "window.addEventListener('DOMContentLoaded', function() { \
        console.log('complete'); \
    });";

	webview_eval(w, js);
	webview_navigate(w, "https://www.douban.com");
	printf("为什么不打印？\n");
	webview_run(w);
	webview_destroy(w);
	return 0;
}
```

## 